<!DOCTYPE html>
<html>
<head>
   <title> Assignment 9 </title>
   <link href="../main.css" rel="stylesheet" type="text/css">
   <script type = "text/javascript">
      var xmlhttp;
      function loadXMLDoc(countries)
      {
         xmlhttp = null;
         if (countries=="")
         { 
            document.getElementById("myDiv").innerHTML="";
            return;
         }
         if (window.XMLHttpRequest)
         {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
         }
         else if (window.ActiveXObject)
	 {
	    xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
	 }
	 if (xmlhttp != null)
	 {
	    xmlhttp.onreadystatechange=state_Change;
	    xmlhttp.open("GET", "http://157.201.194.254/~ercanbracks/" + countries, true);
	    xmlhttp.send(null);
	 }
	 else 
	 {
	    alert("Your browser does not support XMLHTTP.");
	 }
      }   

      function state_Change()
      {
         if (xmlhttp.readyState==4)
	 {
            if (xmlhttp.status==200)
            {	
               document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
	      // alert("Everything is ok");
            }
	    else
	       alert("Are you using the right link?");
	 }  
      }

      function loadDoc() 
      {
	 var url = document.getElementById("urlInput").value;
         if (window.XMLHttpRequest)
         {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
         }
         else if (window.ActiveXObject)
	 {
	    xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
	 }
	 if (xmlhttp != null)
	 {
	    xmlhttp.onreadystatechange=state_Add;
	    xmlhttp.open("GET", url, true);
	    xmlhttp.send(null);
	 }
	 else 
	 {
	    alert("Your browser does not support XMLHTTP.");
	 }
      }

      function state_Add()
      {
         if (xmlhttp.readyState==4)
	 {
            if (xmlhttp.status==200)
            {	
               document.getElementById("urlDiv").innerHTML=xmlhttp.responseText;
            }
	    else
	       alert("Are you using a correct URL?");
	 }  
      }

      function newPage() 
      {
	  document.getElementById("validPage").style.visibility = "visible";
      }
      
   </script>
</head>

<body>
   <div id = "wrapper" style = "text-align:center">
   <header id="top">
   <h1>Ajax</h1>
        <nav id="mainnav">
          <ul>
            <li><a href="../../index.html" class="thispage">Home</a></li>
            <li><a href="../../assign02.html">CS213 Assignments</a></li>
	    <li><a href="http://www.w3schools.com/ajax/">Learn Ajax</a></li>
            <li><a href="http://www.w3schools.com/php/">Plan Ahead</a></li>
            <li></li>
          </ul>
        </nav>
      </header></br>
   <h2>Pick a country</h2>
   <select name = "countries" style = "font-size: 16px" onchange="loadXMLDoc(this.value)">
      <option value = "">Pick a country</option>
      <option value = "mexico.txt"> Mexico </option>
      <option value = "usa.txt"> USA </option>
      <option value = "canada.txt"> Canada </option>
      <option value = "russia.txt"> Russia </option>   
   </select>
   <div>
	<br/><textarea id="myDiv" rows ="10" cols ="30"> </textarea>
   </div><br/>
   

   <h2>Insert a URL</h2>
   <input type ="text" id ="urlInput" value ="">
   <button type="button"  onclick="loadDoc(); newPage()">Load URL</button><br/>
   <span id = "validPage" style = "visibility: hidden"><hr/></span>
   <div id= "urlDiv"></div></br>
   <div>
</body>
</html>

